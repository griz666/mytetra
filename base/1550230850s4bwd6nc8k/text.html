<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Реальная скорость Wi-Fi (на предприятиях) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://divdyn.com/wi-fi-throughput/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">http://divdyn.com/wi-fi-throughput/</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/hub/wireless/"><span style=" text-decoration: underline; color:#0000ff;">Беспроводные технологии</span></a>, </li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/hub/research/"><span style=" text-decoration: underline; color:#0000ff;">Исследования и прогнозы в IT</span></a>, </li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/hub/network_technologies/"><span style=" text-decoration: underline; color:#0000ff;">Сетевые технологии</span></a> </li></ul>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Перевод </li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Непрекращающийся хайп вокруг гигабитных скоростей Wi-Fi современных стандартов провоцирует инженеров прояснять эту тему понятным для всех образом. <br />Что пытаются натянуть за уши маркетологи? Что говорят инженеры? Где же истина? <br />Как всегда, где-то рядом. Какой пропускной способности ожидать в реальных условиях и почему – вы найдете ответ в этой статье. Если совсем нет времени читать, а хочется знать волшебную цифру – </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">75 Мбит/c на двухдиапазонную точку доступа, на всех</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. Кому интересны детали, читайте дальше.<br /><br />Статья написана на базе материала Wi-Fi Throughput от Devin Akin, который больше 20 лет в теме беспроводных сетей а также со-основатель образовательной программы </span><a href="https://www.cwnp.com/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">CWNP</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> (он же CWNE #1). <br />Я просто спросил его, можно ли перевести его статью, и он тут же ответил: “да, я буду в восторге”. <br /><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Чего ждать от 20 МГц?</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /><br />Сначала нужно понять, чего можно ждать от канала шириной 20 МГц при стандартном ассортименте клиентских устройств. Вдруг кто не знает, SS (Spatial Stream) это Пространственный Поток (ПП). Понятние из технологии пространственного мультиплексирования или MIMO, которая появилась еще в 802.11n и уже почти как 10 лет радует повышенной скоростью за счет одновременной передачи нескольких ПП одновременно. </span><a href="https://habr.com/post/150362/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Очень хорошая статья на тему MIMO</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> написана Андреем Кузнецовым, спасибо ему за понятный язык. <br />Для работы с несколькими ПП точке доступа или клиенту нужно иметь на борту несколько приёмо-передатчиков с антеннами (об их числе говорят первые две цифры в характеристиках, например 2×2:2), со всеми энергетическими накладными расходами.<br /><br />Ниже отличная графика от </span><a href="http://www.revolutionwifi.net/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Andrew Von Nagy</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;">.<br /><br /></span><img src="image1550230811w8sj88o7wu.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /><br />На этом рисунке, со всеми клиентами 1×1:1, каждый из которых передает поток 3 Мбит/c, эфирное время (airtime) чистого 20 МГц канала насыщается. При утилизации канала порядка 75-80% происходит полное насыщение. В результате суммарная пропускная способность канала равна примерно 30 Мбит/c или суммарно 10 устройств на 1 ТД (Точку Доступа).<br />Если все клиенты могут работать с 2ПП (2×2:2), то есть шанс получить суммарную пропускную способность порядка 65 Мбит/c и 21 устройство одновременно, неплохо, да?<br /><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Во что упирается пропускная способность?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Важно отметить, что мы можем изменять число клиентов и пропускную способность на каждого клиента, но все равно будем всегда упираться в ограничение из-за насыщения эфирного времени (airtime saturation). Например, если каждому устройству, подключаемому к ТД, нужно 2 Мбит/c и они однопоточные (1ПП), то я получу максимум 15 одновременно работающих устройств, пока не упрусь в насыщение при 30 Мбит/c (2×15=30). Такая же математика будет при 2ПП клиентах, при 32-33 клиентах на скорости 2 Мбит/c мы упираемся в насыщении при общей скорости 65 Мбит/c. <br /><br />Хорошо </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">предсказуемое соотношение клиентов в современных сетях – 2/3 1ПП на 1/3 2ПП. </span><span style=" font-family:'Sans Serif'; font-size:9pt;">Клиентов с 3ПП (типа MacBook Pro) меньше 1%. Зная это соотношение можно ожидать что средняя ТД при свободном (от помех и соседей) канале перейдет в насыщение примерно при 45Мбит/c. <br /><br />Если в ТД 2 радиомодуля, каждый работает на своей частоте, свободной от интерференции (ACI, CCI, non-Wi-Fi interference) то есть шанс суммарно получить 90 Мбит/c на 1 ТД. В реальности свой и соседский Wi-Fi влияет так, что в диапазоне 2,4 ГГц получить 30 Мбит/c вместо 45 это удача. <br /><br />Таким образом </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">суммарная пропускная способность любой ТД c двумя радиомодулями в реальных условиях — 75 Мбит/c</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> (на всех подключенных к ней клиентов). <br /><br />[Примечание переводчика]: с точки зрения эффективности использования спектра Wi-Fi крайне неэффективная технология, так как изначально предполагает конкурентный доступ к среде для разношерстных устройств в общедоступном диапазоне. Для наглядности можно привести такой рисунок.<br /><br /></span><img src="image15502308111zpcc5sc24.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Маркетологи и продажники</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Конечно, ребята из отделов маркетинга могут не понимать разницу между скоростью подключения (data rate) и пропускной способностью полудуплексного канала. Также они, возможно, хотят чтобы вы рассматривали только идеальные, с точки зрения радиосигнала условия, где математика выглядит так:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">ТД с двумя радиомодулями на 5 ГГц</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Каналы на 80 МГц (которые редко, если вообще используются в Enterprise) и 1.3 Гбит/c при этом</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1 MacBook Pro (3×3:3) подключенный к каждому радиомодулю ТД. (всего 2 ноута)</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Оба ноута скачивают большой файл, при этом по полной используя агрегацию (A-MPDU+A-MSDU with large BlockAck)</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Спектр идеально чист (нет ACI, нет CCI, нет прочих сигналов). (Мечты, мечты..)</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">NAS или файловый сервер с SSD на борту подключен 10G интерфейсом к ядреной сети.</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На ТД отключены ресурсоёмкие фичи, нет проблем с загрузкой CPU. (Такое вполне возможно)</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Драйверы, как клиента, так и ТД отлично оптимизированы под пропускную способность.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">И вам предлагают купить коммутатор с MGIG? </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />В таком смехотворно-нереалистичном сценарии, каждый из двух клиентов подключается на скорости 1,3 Гбит/c и имеет пропускную способность 650 Мбит/c, что при отсутствии интерференции даст 1.3 Гбит/c на ТД. Используя этот сумасшедший сценарий, продажники убеждают покупать коммутаторы с 2.5 Гбит/c портами. <br /><br />С двухдиапазонными 11ac/n ТД, в нагруженном Enterprise сценарии, где используются каналы 20 МГц, чтобы минимизировать негативное влияние (contention) своих и соседних ТД насколько это возможно, вы можете ожидать, что насыщение эфира с обоих радиомодулей наступит раньше, чем вы упретесь в 100 Мбит/c пропускную способность порта. Помните, что control и management кадры имеют большие накладные расходы (overhead) а большинство кадров, несущих данные, имеют размер порядка 256 байт, что тоже негативно сказывается на пропускной способности.<br /><br />Три вида негативного влияния (contention) (не включая ACI и не-Wi-Fi интерференцию) можно назвать Intra-BSS, Inter-BSS и Client-to-Client. В вашей сети может быть много больше такого contention чем вы думаете, особенно, если вы не тратили время на дизайн сети и её проверку. Contention сильно ограничивает пропускную способность.<br /><br /></span><img src="image1550230811qx1mfo38qt.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /><br />Когда кто-то из вендора или его партнера предположит, что вам нужно больше, чем 1 Гбит/c порт на ТД, вы должны спросить его следующее:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пожалуйста, объясните вашу логику расчета, согласно которой вы предполагаете, что клиентское устройство, или группа таких устройств могут достигнуть скорости 1 Гбит/c.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Остерегайтесь, что они будут говорить про канальную скорость (data rate) вместо пропускной способности</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Остерегайтесь, что они убедят вас в том, что каналы 80 МГц (или даже 160) это хорошо. Также остерегайтесь полуправды о том, что широкие каналы дадут вам больше канальной скорости, что даст меньшую загрузку эфира и увеличит ёмкость. Это ошибка. </li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Остерегайтесь, что они убедят вас что MU-MIMO это хорошо. На практике толку мало.</li></ol>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пожалуйста, покажите мне данные с сети одного из ваших заказчиков, кто купил коммутаторы с портами 2.5 Гбит/c (или больше) где видно, что трафик к ТД превысил значение 1 Гбит/c больше, чем на 15 минут (что тоже маловероятно).</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Живет ли старый 802.11n? </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Если я сам спроектировал, настроил и проверил двухдиапазонную 11n 2×2:2 Wi-Fi инфраструктуру сейчас, где ТД имеют 100 Мбит/c аплинки, 95% компаний думают, что эта сеть наиболее замечательная из тех, что они когда-либо видели. Я бы сам предпочел такую low-end, 2×2:2, 11n правильно построенную сеть 99% плохо построенным 11ac Wave2 сетям, существующим сегодня. [Примечание переводчика]: новые 11ac точки обладают бОльшим набором технологий, позволяющих строить то, что называется HD или сети высокой плотности, но всегда мы упираемся в физику и математику. Тот же RxSOP это последнее, что нужно тюнить… <br /><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Что же с 11ax? </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Арсен Бандуриан уже рассказывал, </span><a href="https://habr.com/post/348472/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">чего не стоит ждать от 802.11ax</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> пересказав статью того-же Девина Акина. Но эту тему стоит поднять еще раз.<br /><br />Хайп уже начался, вендоры начали выпускать ТД, хотя стандарт еще не утвержден (в конце 2019 ожидается).<br />Использование широких каналов крайне неэффективно в реальных условиях, как вы можете видеть на рисунке ниже. Смотря на 11ac 42 канал (36 – основной канал) снизу слева видно, что основной канал (primary channel) убит, а вторые каналы (secondary) едва используются. Это потому, что 75% Wi-Fi трафика это management, control и legacy data, и все они передаются только на основном канале. <br /><br /></span><img src="image1550230811enh66peacq.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /><br />Также, </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">подавляющее большинство клиентов сейчас это 11n</span><span style=" font-family:'Sans Serif'; font-size:9pt;">, так что вторые 40 МГц от 80 МГц канала в основном не используются вообще. Именно по этой причине 11ax был создан. Эффективность создает общесистемную ёмкость и повышает пропускную способность каждого клиента. Основная задача 11ax в 4 раза увеличить пропускную способность на клиента, которая реально может быть достигнута если:<br /><br /></span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В сети работают преимущественно 11ax клиенты</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сеть великолепно спроектирована и настроена</li></ol>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Что означает, </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">скорее всего, лет через 10 это произойдет.</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Нужно очень много времени, чтобы избавиться от старых клиентских устройств. 11g клиенты, увидевшие свет в 2003 году, порой всё еще в работе. Что бы вам не рассказывали продажники, что через 3 года всё поменяется, им не стоит верить, факты говорят о другом.<br /><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Помогают ли каналы 40 и 80 МГц? Нет</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />На графике снизу можно увидеть, как используя узкие каналы достигается большая пропускная способность на каждое клиентское устройство. <br /><br /></span><img src="image15502308114dqtp2fxvx.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /><br />Это же будет справедливо и для 11ax и это причина OFDMA технологии позволяющей делить 20 МГц на подканалы по 2 МГц, 4 МГц и 8 МГц, которые называются Resource Unit (RUs). В течении и срока службы первого поколения 11ax точек (5 лет с даты появления) я ожидаю не более чем 25% 11ax клиентов на рынке в целом. Таким образом, с оптимально спроектированной и настроенной Wi-Fi сетью вы можете ожидать увеличение эффективности сети благодаря проникновению 11ax клиентов, но в целом, ничего удивительного (в оригинале — game-changing). Если облечь это в цифры, добавив 25% к общей ёмкости сети (45 М на 5 ГГц + 30 М на 2,4 ГГц) получим 75 М × 1,25=</span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">93,75 Мбит/c</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Нужно ли вам больше, чем Гигабит на медном порту? Нет.</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Математика не врёт</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Эти числа реальны. Если вы думаете иначе, найдите Enterprise сеть, где эти числа превышают указанные мною, покажите мне их, и я изменю эту статью.<br /><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Практический пример</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Эффективные простые правила</span><span style=" font-family:'Sans Serif'; font-size:9pt;">, которые оказались очень точными, для вычисления пропускной способности на 1 устройство таковы:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">MCS rate × 50% / число пользователей [Одно устройство в сети]</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">MCS rate × 45% / число пользователей [Немного устройств, средняя нагрузка]</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">MCS rate × 40% / число пользователей [Много устройств, средняя и сильная нагрузка]</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Чтобы помочь вам понять лучше, приведу </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">пример</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> от одного из моих заказчиков.<br />Они внедрили 3×3:3 ТД с каналами 20 МГц для подключения до 100 активных устройств в каждой аудитории. Основным приложением было unicast video c потоком 2 Мбит/c для 30 человек в классе. После успешного внедрения, они позвали меня, сообщая мысли о том, что одна ТД деффективная. Расследование показало, что виноваты клиентские устройства. В этом классе было 30 1ПП iPad которые не могли достигнуть скорости 2 Мбит/c на при работе всех 30 штук.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Канальная скорость (Data Rate) = 72 Мбит/c</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">40% эффективность</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Общая пропускная способность 29 Мбит/c</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">/30 = 950 Кбит/c на устройство</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />В другом классе они использовали 30 iPad Air 2, 2ПП и они работали хорошо.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Канальная скорость (Data Rate) = 173 Мбит/c</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">40% эффективность</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Общая пропускная способность 69 Мбит/c</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">/30 = 2,3 Мбит/c на устройство</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Его замешательство было в том, что iPad c 1ПП не мог показать видео адекватно, а его MacBook Pro (3ПП) получал 145 Мбит/c в тот момент, когда класс был пуст.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Канальная скорость (Data Rate) = 289 Мбит/c</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">50% эффективность</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Общая пропускная способность 145 Мбит/c</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">/1 = 145 Мбит/c на устройство</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Представьте себе, математика работает. И у вас сработает тоже. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">На этом статья Девина заканчивается</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />От себя, Максима Гетмана, добавлю три жизненных примера.<br /><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Завод</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Сеть для подключения мостовых кранов правильно спроектирована и настроена, работает только в диапазоне 5 ГГц, в качестве клиентов – ядреные ТД Cisco IW3702 в WGB режиме. На одну ТД 1562D на колонне максимум цепляются 2 крана. SNR ниже 40 дБ не опускается, сигнал на приеме с обоих сторон порядка -60 дБм. Помех с существенным duty cycle не обнаружено. С крана идет постоянный UDP поток 3-5М с камеры Axis. Помимо этого, килобитный трафик с датчиков и порядка 1М трафик на комп крановщика. Это все работает прекрасно. Если 2 крана на точку, тоже прекрасно. Но если в момент, когда на ТД 1 кран, и мы еще нагружаем сеть iperf-ом 10 Мбит/c UDP то наблюдаем потери порядка 10-12%. Казалось бы, в теории при SNR 40 дБ мы должны работать на MCS9 стабильно, оба устройства 11ac. <br /><br /></span><img src="image15502308112lajnp76ee.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /><br />Увы, в жизни наблюдается работа на MCS3-7, что дает, при 1ПП, 20 МГц и длинном защитном интервале (а в железном цеху иначе нельзя) 26 Мбит/c в худшем случае. В итоге это соответствует 13 Мбит/c реального трафика на 1 ТД. Вот так. Данные хуже, чем по “офисным” формулам. Это нужно учитывать.<br /><br />Кто может объяснить с точки зрения физики, почему DRS механизм так снижает скорость, при приличном SNR, буду рад тому. По моим соображениям, в условиях железного цеха, забитого железом, отражений столь много, что DSP не может разобрать сигнал на приеме, не отправляет ACK и мы получаем снижение скорости. Ах да, антенны на ТД направленные, 10 дБи. На крановых клиентах всенаправленные, 7 дБи. Специфика такова что направленные не сделать, отказоустойчивость должна быть. Рабочие расстояния 30-80 метров. Вот так, дорогое оборудование, а много не выжать.<br /><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Большое многофункциональное здание с офисами</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Здание имеет огромный атриум внутри, на несколько этажей общий. В офисах на этажах стоят точки, не мало. В атриуме на 1-м этаже слышно точки с 6-ти этажей. Что в итоге? Даже при небольшой нагрузке на сеть пропускная способность стремиться к нулю. Особенно в 2.4 ГГц. В этом случае хочется напомнить про </span><a href="http://www.revolutionwifi.net/revolutionwifi/p/ssid-overhead-calculator.html"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">beacon overhead</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;">. Если у вас по 5 SSID на точку, не убраны низкие скорости (маячки вещаются на скорости 1 М), то в точке пространства, где на 1 частотном канале слышно 3 своих же точки, 48% утилизации канала просто от ваших же маячков! Есть над чем задуматься? Выключим низкие скорости и при 12 М нижней mandatory утилизация канала упадет до 4,5% в тех же условиях. Неплохо так, на порядок? <br /><br /></span><img src="image1550230811zs1wyn1tdd.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /><br />Что делать с атриумом? Проектировать офисные точки с направленными от-атриума антеннами, или хотя-бы относить их подальше. А если уже стоят? Минимизировать число SSID, увеличить доступные скорости и договорится с соседями (если они есть), чтобы сделали тоже самое!<br /><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Выставочный центр. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />На павильон поставили 20 ТД, с более-менее направленными антеннами и хотят получить по 1 М на каждого клиента, которых 500. По 25 клиентов на ТД. Если считать, что у нас идеальный эфир и мы можем получить по 75 М на каждую ТД, то вроде все сходится, даже с запасом. 20x75 М=1500 М, а надо всего 500 М. Нормально? Нет! На какой скорости будут подключаться разношерстные клиенты? <br /><br /></span><img src="image1550230811jhqpqfslt3.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Канальная скорость (Data Rate) = 52 Мбит/c (MCS5, 1ПП)</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">40% эффективность</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Общая пропускная способность 20,8 Мбит/c</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">/25 = 0,8 Мбит/c на устройство</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Помните, что это в хороших условиях? Сколько каналов на 2,4? 3 канала. Сколько каналов на 5? 15 каналов (и не все доступны всем клиентам). Мы как минимум получим CCI от своих же ТД, особенно на 2.4 ГГц. Даже если мы сократим число SSID до 3х и выключим скорости ниже 12 М, беда выставки еще в том, что каждый норовит принести свой TP-Link, запросить у организатора подключение кабелем и вещать в эфир, с дефолтными настройками, которые дадут overhead только лишь маячками на 1М скорости, а еще и ACI от того, что на 3й канал встали, по незнанию. <br /><br />Вот что твориться в эфире на 2.4 в разгар выставки. Утилизация до 90% по уровню -80 дБм.<br /><br /></span><img src="image1550230811iv4tury2xc.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Что делать?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Применять узконаправленные антенны, минимизируя свои зоны покрытия, избегая пересечения каналов, сколько это возможно. При проведении ПНР не лениться несколько раз провести радиообследование, чтобы точно выставить частоты и мощности, не доверять автоматике. Выделить несколько каналов на 5 ГГц для тех, кто хочет “свой Wi-Fi” и запрещать работать на других каналах. Тогда, может быть, выставочная сеть будет более-менее живой.<br /><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Вывод всей статьи</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Знания и опыт помогут вам строить (если вы инженер интегратора) или заказывать (если вы на стороне заказчика) построение Wi-Fi сети адекватно. <br /><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Ниже я приведу несколько полезных Wi-Fi инженерам ссылок:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Рабочие материалы</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />1. </span><a href="http://www.revolutionwifi.net/capacity-planner/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Revolution Wi-Fi Capacity Planner </span></a><span style=" font-family:'Sans Serif'; font-size:9pt;">планировщик на базе этих самых адекватных формул. поможет достаточно точно прикинуть, а сколько ТД нужно чтобы подключить N клиентов. <br />2. </span><a href="http://mcsindex.com/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Таблица MCS</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> поможет определить канальную скорость по MCS.<br />3. </span><a href="http://www.revolutionwifi.net/revolutionwifi/2014/08/visualizing-how-wi-fi-snr-helps.html"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Таблица соотношения MCS и SNR</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> поможет узнать MCS теоретически (на практике хуже)<br />4. </span><a href="http://www.revolutionwifi.net/revolutionwifi/p/ssid-overhead-calculator.html"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">SSID Overhead Calculator</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> позволит понять как влияет число SSID и скорость маячков<br />5. </span><a href="https://clients.mikealbano.com/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Таблица возможностей клиентских устройств</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> позволит узнать устройства до их внедрения<br />6. </span><a href="https://rssicompared.com/devices"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">RSSI Compared</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> поможет понять разброс по приему на разных устройствах<br /><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Обучающие материалы</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />1. </span><a href="https://www.youtube.com/channel/UCuhom3rBK4pX6VL656-K07A"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Ekahau Wi-Fi Design Tools</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> YouTube канал с лучшими вебинарами на тему Wi-Fi<br />2. </span><a href="https://www.amazon.com/gp/product/1119425786/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">CWNA 5-е издание</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;">. Лучший в мире учебник по Wi-Fi. Дешевле Амазона не найдете. Учебник стоит своих денег.<br />3. </span><a href="https://www.ozon.ru/context/detail/id/139616669/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Технологии современных беспроводных сетей Wi-Fi</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;">. Учебное пособие. Актуальный учебник по Wi-Fi на Русском. Стоит в бумаге примерно также как CWNA. В сети встречается его pdf версия.<br />4. </span><a href="http://media.wiley.com/assets/7373/77/wifi_network_design_for_dummies_ekahau_special_edition_9781119450566.pdf"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Wi-Fi Network Design for dummies</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> простое и понятное пособие для тех, кто только начинает. Если вы руководитель проекта, менеджер, и у вас нет времени на погружение в дебри Wi-Fi, за несколько часов прочтите 50 страничек Wi-Fi Network Design for dummies, и у вас будет понимание как сейчас строят Wi-Fi по-человечески. Пособие распространяется бесплатно. <br /><br />Если вы инженер, какой учебник подробнее, спросите вы? Можно судить по толщине. <br /><br /></span><img src="image1550230811gw4xsjktsx.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"> <br /><br />Если у вас будут интересные вопросы по теме Wi-Fi, найти мои контакты просто. Буду рад ответить.<br /><br />ps статья отчасти пересекается по теме с &quot;</span><a href="https://habr.com/company/comptek/blog/427575/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Почему Wi-Fi не будет работать, как планировалось</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;">&quot; Андрея Парамонова. Его статья даже имеет бОльшую глубину. Для тех кто хочет погрузится в детали, очень рекомендую её к прочтению. <br />pps порой, мне кажется, что хабру не хватает функционала банального форума, где можно более четко делить на подкатегории, чтобы потом, спустя годы, информация не терялась, а была в доступе.</span></p></body></html>