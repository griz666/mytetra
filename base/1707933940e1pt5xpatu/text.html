<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Генерация ключей и сертификатов</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">1. Инициализация PKI (инфраструктура публичных ключей)</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Теперь инициализируем наш CA и выпустим корневую пару ключей. Обратите внимание, что данные действия следует выполнять </span><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline;">только один раз</span><span style=" font-family:'Sans Serif'; font-size:9pt;">, повторное выполнение указанных команд </span><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline;">уничтожит</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> существующий CA и потребует повторного создания всех ключей и сертификатов.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa init-pki</span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1707933972jas93ym88f.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Подтверждаем инициализацию. Данная команда инициализирует новую структуру центра сертификации с очисткой всех данных.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">2. Создание удостоверяющего центра CA</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Генерируем корневой сертификат (CA), им должны быть подписаны все сертификаты используемые </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-style:italic;">OpepVPN</span><span style=" font-family:'Sans Serif'; font-size:9pt;">-сервером.</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Создадим файл для генерации случайных данных:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> touch pki/.rnd</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">и активируем наш CA:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa build-ca</span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1707933972im2arse3i4.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"> <br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">На запрос </span><span style=" font-family:'monospace'; font-size:9pt;">&quot;Enter New CA Key Passphrase&quot;</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> задайте пароль.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">На запрос </span><span style=" font-family:'monospace'; font-size:9pt;">&quot;Re-Enter New CA Key Passphrase&quot;</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> повторите пароль. Этот пароль защищает приватный ключ удостоверяющего центра. Также пароль потребуется каждый раз, когда нужно будет подписывать в удостоверяющем центре сертификаты для серверов и клиентов </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-style:italic;">OpenVPN</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Также команда уточнит введенные вами ранее значения в файле </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vars</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">На запрос ввести </span><span style=" font-family:'monospace'; font-size:9pt;">&quot;Common Name&quot;</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> можно просто нажать </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Enter</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> или ввести имя, которое будет обозначать название центра сертификации.</span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1707933972kqb5mprn3n.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Кроме этого имеется возможно сформировать CA и без ключа:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa build-ca nopass</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Но это менее безопасно.</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">После выполнения этих команд будет выполнено создание структуры директорий CA, публичный сертификат центра сертификации </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ca.crt</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> вы сможете найти в директории </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">pki</span><span style=" font-family:'Sans Serif'; font-size:9pt;">, а закрытый ключ </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ca.key</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> в </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">pki/private</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. Закрытый ключ является секретным и не при каких обстоятельствах не должен покидать свое расположение и тем более не должен передаваться по открытым каналам связи, доступ третьих лиц к закрытому ключу также следует ограничить.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Полезные ключи Easy-RSA</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Сменить директорию для файлов, относящихся к PKI, можно командой:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --pki-dir=n</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Задать новый файл </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vars</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. Полезно, когда он уже создан, достаточно просто указать путь к нему:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --vars=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; font-style:italic;">путь_к_файлу</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Изменить режим работы сертификата. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --dn-mode=</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; font-style:italic;">&lt;режим&gt;</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Имеет два значения:<br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">cn_only</span> - упрощенный режим, при котором в сертификате прописывается только CN (имя того, кому выдан сертификат);</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">org</span> - традиционный режим, при котором заполняются все реквизиты организации.</li></ul>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">OpenVPN может использовать любой режим.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Ключи для быстрой замены значений в файле </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vars</span><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --req-c=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; color:#ee1d24;">имя</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;      # Смена на </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">&lt;имя&gt;</span><span style=" font-family:'monospace'; font-size:9pt;"> страны</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --req-st=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; color:#ee1d24;">имя</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;     # Смена на </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">&lt;имя&gt;</span><span style=" font-family:'monospace'; font-size:9pt;"> области/региона</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --req-city=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; color:#ee1d24;">имя</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;   # Смена на </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">&lt;имя&gt;</span><span style=" font-family:'monospace'; font-size:9pt;"> названия города</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --req-org=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; color:#ee1d24;">имя</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;    # Смена на </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">&lt;имя&gt;</span><span style=" font-family:'monospace'; font-size:9pt;"> наименования организации</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --req-email=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; color:#ee1d24;">имя</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;  # Смена на </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">&lt;имя&gt;</span><span style=" font-family:'monospace'; font-size:9pt;"> электронной почты</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --req-ou=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; color:#ee1d24;">имя</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;     # Смена на </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">&lt;имя&gt;</span><span style=" font-family:'monospace'; font-size:9pt;"> наименования отдела и т.п.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Изменить размер ключа шифрования:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --keysize=#</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">По умолчанию, стоит значение </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">2048</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. Если вы на первое место ставите безопасность, то рекомендуется увеличить размер ключа до </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">3072</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> или </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">4096</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. Если криптографическая стойкость не играет важной роли, можно установить значение </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">1024</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Установить срок действия корневого сертификата СА и сертификата пользователя:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --days=#</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Следует учитывать, что этим ключом устанавливается срок для обоих сертификатов. Если хотите настроить разные сроки, это необходимо сделать вручную.</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Изменить алгоритм шифрования — RSA (по умолчанию) или EC.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --use-algo=ALGO</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">3. Создание ключа Диффи-Хеллмана</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Файл </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-style:italic;">Диффи-Хеллмана</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> используется для безопасного получения общего секретного ключа в незащищенных каналах связи, применяется для обеспечения защиты трафика от расшифровки между клиентом и сервером.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa gen-dh</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">При этом будет создан файл </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">/usr/share/easy-rsa/3/pki/dh.pem</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">На этом создание центра сертификации (CA) можно считать законченным.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">4. Создание сертификата сервера</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Для создания сертификата сервера необходимо сначала создать файл запроса. Файл запроса для сервера создадим без пароля с помощью опции </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">nopass</span><span style=" font-family:'Sans Serif'; font-size:9pt;">, иначе придется вводить пароль с консоли при каждом запуске сервера.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Находясь в каталоге </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">/usr/share/easy-rsa/3/</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> выполните команду:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa gen-req vpn-server nopass</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Где </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vpn-server</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> - имя вашего сервера, а </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">nopass</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> означает, что закрытый ключ следует создать без пароля. При выполнении данной команды будет создан запрос на сертификат и сгенерирован закрытый ключ сервера </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vpn-server.key</span><span style=" font-family:'Sans Serif'; font-size:9pt;">, который будет располагаться в </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">pki/private</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. Закрытый ключ является секретным и не должен передаваться по открытым каналам связи и доступ к нему также должен быть ограничен.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">На запрос ввода </span><span style=" font-family:'monospace'; font-size:9pt;">Common Name</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> нажмите </span><span style=" font-family:'monospace'; font-size:9pt;">Enter</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Теперь необходимо подписать запрос на получение сертификата у нашего CA:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa sign-req server vpn-server</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Опция </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">server</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> обозначает выпуск сертификата для сервера.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">После ввода команды подтверждаем правильность данных вводом </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">yes</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> Confirm request details: </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">yes</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Генерация ключей и сертификатов</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">1. Инициализация PKI (инфраструктура публичных ключей)</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Теперь инициализируем наш CA и выпустим корневую пару ключей. Обратите внимание, что данные действия следует выполнять </span><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline;">только один раз</span><span style=" font-family:'Sans Serif'; font-size:9pt;">, повторное выполнение указанных команд </span><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline;">уничтожит</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> существующий CA и потребует повторного создания всех ключей и сертификатов.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa init-pki</span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1707933976tatkgfanid.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Подтверждаем инициализацию. Данная команда инициализирует новую структуру центра сертификации с очисткой всех данных.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">2. Создание удостоверяющего центра CA</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Генерируем корневой сертификат (CA), им должны быть подписаны все сертификаты используемые </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-style:italic;">OpepVPN</span><span style=" font-family:'Sans Serif'; font-size:9pt;">-сервером.</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Создадим файл для генерации случайных данных:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> touch pki/.rnd</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">и активируем наш CA:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa build-ca</span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1707933976qwgj3sg8r2.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"> <br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">На запрос </span><span style=" font-family:'monospace'; font-size:9pt;">&quot;Enter New CA Key Passphrase&quot;</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> задайте пароль.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">На запрос </span><span style=" font-family:'monospace'; font-size:9pt;">&quot;Re-Enter New CA Key Passphrase&quot;</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> повторите пароль. Этот пароль защищает приватный ключ удостоверяющего центра. Также пароль потребуется каждый раз, когда нужно будет подписывать в удостоверяющем центре сертификаты для серверов и клиентов </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-style:italic;">OpenVPN</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Также команда уточнит введенные вами ранее значения в файле </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vars</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">На запрос ввести </span><span style=" font-family:'monospace'; font-size:9pt;">&quot;Common Name&quot;</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> можно просто нажать </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Enter</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> или ввести имя, которое будет обозначать название центра сертификации.</span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1707933976m5m11g865y.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Кроме этого имеется возможно сформировать CA и без ключа:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa build-ca nopass</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Но это менее безопасно.</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">После выполнения этих команд будет выполнено создание структуры директорий CA, публичный сертификат центра сертификации </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ca.crt</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> вы сможете найти в директории </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">pki</span><span style=" font-family:'Sans Serif'; font-size:9pt;">, а закрытый ключ </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ca.key</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> в </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">pki/private</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. Закрытый ключ является секретным и не при каких обстоятельствах не должен покидать свое расположение и тем более не должен передаваться по открытым каналам связи, доступ третьих лиц к закрытому ключу также следует ограничить.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Полезные ключи Easy-RSA</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Сменить директорию для файлов, относящихся к PKI, можно командой:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --pki-dir=n</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Задать новый файл </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vars</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. Полезно, когда он уже создан, достаточно просто указать путь к нему:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --vars=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; font-style:italic;">путь_к_файлу</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Изменить режим работы сертификата. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --dn-mode=</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; font-style:italic;">&lt;режим&gt;</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Имеет два значения:<br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">cn_only</span> - упрощенный режим, при котором в сертификате прописывается только CN (имя того, кому выдан сертификат);</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">org</span> - традиционный режим, при котором заполняются все реквизиты организации.</li></ul>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">OpenVPN может использовать любой режим.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Ключи для быстрой замены значений в файле </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vars</span><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --req-c=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; color:#ee1d24;">имя</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;      # Смена на </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">&lt;имя&gt;</span><span style=" font-family:'monospace'; font-size:9pt;"> страны</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --req-st=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; color:#ee1d24;">имя</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;     # Смена на </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">&lt;имя&gt;</span><span style=" font-family:'monospace'; font-size:9pt;"> области/региона</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --req-city=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; color:#ee1d24;">имя</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;   # Смена на </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">&lt;имя&gt;</span><span style=" font-family:'monospace'; font-size:9pt;"> названия города</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --req-org=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; color:#ee1d24;">имя</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;    # Смена на </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">&lt;имя&gt;</span><span style=" font-family:'monospace'; font-size:9pt;"> наименования организации</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --req-email=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; color:#ee1d24;">имя</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;  # Смена на </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">&lt;имя&gt;</span><span style=" font-family:'monospace'; font-size:9pt;"> электронной почты</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --req-ou=&lt;</span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600; color:#ee1d24;">имя</span><span style=" font-family:'monospace'; font-size:9pt;">&gt;     # Смена на </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">&lt;имя&gt;</span><span style=" font-family:'monospace'; font-size:9pt;"> наименования отдела и т.п.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Изменить размер ключа шифрования:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --keysize=#</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">По умолчанию, стоит значение </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">2048</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. Если вы на первое место ставите безопасность, то рекомендуется увеличить размер ключа до </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">3072</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> или </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">4096</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. Если криптографическая стойкость не играет важной роли, можно установить значение </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">1024</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Установить срок действия корневого сертификата СА и сертификата пользователя:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --days=#</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Следует учитывать, что этим ключом устанавливается срок для обоих сертификатов. Если хотите настроить разные сроки, это необходимо сделать вручную.</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Изменить алгоритм шифрования — RSA (по умолчанию) или EC.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa --use-algo=ALGO</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">3. Создание ключа Диффи-Хеллмана</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Файл </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-style:italic;">Диффи-Хеллмана</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> используется для безопасного получения общего секретного ключа в незащищенных каналах связи, применяется для обеспечения защиты трафика от расшифровки между клиентом и сервером.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa gen-dh</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">При этом будет создан файл </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">/usr/share/easy-rsa/3/pki/dh.pem</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">На этом создание центра сертификации (CA) можно считать законченным.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">4. Создание сертификата сервера</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Для создания сертификата сервера необходимо сначала создать файл запроса. Файл запроса для сервера создадим без пароля с помощью опции </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">nopass</span><span style=" font-family:'Sans Serif'; font-size:9pt;">, иначе придется вводить пароль с консоли при каждом запуске сервера.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Находясь в каталоге </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">/usr/share/easy-rsa/3/</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> выполните команду:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa gen-req vpn-server nopass</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Где </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vpn-server</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> - имя вашего сервера, а </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">nopass</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> означает, что закрытый ключ следует создать без пароля. При выполнении данной команды будет создан запрос на сертификат и сгенерирован закрытый ключ сервера </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vpn-server.key</span><span style=" font-family:'Sans Serif'; font-size:9pt;">, который будет располагаться в </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">pki/private</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. Закрытый ключ является секретным и не должен передаваться по открытым каналам связи и доступ к нему также должен быть ограничен.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">На запрос ввода </span><span style=" font-family:'monospace'; font-size:9pt;">Common Name</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> нажмите </span><span style=" font-family:'monospace'; font-size:9pt;">Enter</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Теперь необходимо подписать запрос на получение сертификата у нашего CA:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> ./easyrsa sign-req server vpn-server</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Опция </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">server</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> обозначает выпуск сертификата для сервера.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">После ввода команды подтверждаем правильность данных вводом </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">yes</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> Confirm request details: </span><span style=" font-family:'monospace'; font-size:9pt; font-weight:600;">yes</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Далее вводим пароль, который указывали при создании корневого сертификата. В результате сформируется сертификат сервера </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">/usr/share/easy-rsa/3/pki/issued/vpn-server.crt</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.</span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image17079339769fo2zkx97f.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">5. Создание TA ключа</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Для активации </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">tls-auth</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> необходимо сгенерировать дополнительный секретный ключ. Сделать это можно с помощью команды:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> openvpn --genkey --secret pki/ta.key</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Tls-auth</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> добавляет использование еще одной подписи HMAC к handshake-пакетам SSL/TLS, инициируя дополнительную проверку целостности. Теперь пакет, не имеющий такой подписи, будет сразу отбрасываться. Это обеспечит дополнительный уровень безопасности протокола SSL/TLS, защищая систему от таких атак, как:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сканирование прослушиваемых VPN-сервером портов;</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Инициация SSL/TLS-соединения несанкционированной машиной (tls-auth отсекает их на значительно более раннем этапе, чем при использовании <span style=" font-style:italic;">OpenVPN</span> без tls-auth);</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">DoS-атаки и флуд на порты <span style=" font-style:italic;">OpenVPN</span>;</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Переполнение буфера SSL/TLS.</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Перенос готовых сертификатов в /etc/openvpn</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Сертификаты сервера готовы и находятся в каталоге </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">pki</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. В </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">/etc</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> создадим новый каталог, в котором будем хранить сертификаты:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> mkdir -p /etc/openvpn/server/keys</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Переходим в каталог </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">pki</span><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> cd /usr/share/easy-rsa/3/pki/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Копируем в </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">/etc/openvpn/server/keys</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> следующие сертификаты:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> cp ca.crt issued/vpn-server.crt private/vpn-server.key dh.pem ta.key /etc/openvpn/server/keys/</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Далее вводим пароль, который указывали при создании корневого сертификата. В результате сформируется сертификат сервера </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">/usr/share/easy-rsa/3/pki/issued/vpn-server.crt</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.</span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1707933972end7cx5yld.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">5. Создание TA ключа</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Для активации </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">tls-auth</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> необходимо сгенерировать дополнительный секретный ключ. Сделать это можно с помощью команды:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> openvpn --genkey --secret pki/ta.key</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Tls-auth</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> добавляет использование еще одной подписи HMAC к handshake-пакетам SSL/TLS, инициируя дополнительную проверку целостности. Теперь пакет, не имеющий такой подписи, будет сразу отбрасываться. Это обеспечит дополнительный уровень безопасности протокола SSL/TLS, защищая систему от таких атак, как:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сканирование прослушиваемых VPN-сервером портов;</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Инициация SSL/TLS-соединения несанкционированной машиной (tls-auth отсекает их на значительно более раннем этапе, чем при использовании <span style=" font-style:italic;">OpenVPN</span> без tls-auth);</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">DoS-атаки и флуд на порты <span style=" font-style:italic;">OpenVPN</span>;</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Переполнение буфера SSL/TLS.</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Перенос готовых сертификатов в /etc/openvpn</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Сертификаты сервера готовы и находятся в каталоге </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">pki</span><span style=" font-family:'Sans Serif'; font-size:9pt;">. В </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">/etc</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> создадим новый каталог, в котором будем хранить сертификаты:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> mkdir -p /etc/openvpn/server/keys</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Переходим в каталог </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">pki</span><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> cd /usr/share/easy-rsa/3/pki/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Копируем в </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">/etc/openvpn/server/keys</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> следующие сертификаты:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt;"> cp ca.crt issued/vpn-server.crt private/vpn-server.key dh.pem ta.key /etc/openvpn/server/keys/</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans Serif'; font-size:9pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:x-large; font-weight:600;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:x-large; font-weight:600;"><br /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Создание сертификата для OpenVPN-клиента</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для настройки клиента необходимо на сервере создать пользовательские сертификаты, а на клиентском компьютере установить программу <span style=" font-style:italic;">OpenVPN</span> и настроить ее.</p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:large; font-weight:600;">1. Создание клиентского сертификата</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для создания клиентского сертификата переходим в каталог <span style=" font-weight:600;">easy-rsa</span>:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> cd /usr/share/easy-rsa/3</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Формируем запрос на клиентский сертификат:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> ./easyrsa gen-req client1 nopass</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Где <span style=" font-weight:600;">client1</span> - имя клиента, а <span style=" font-weight:600;">nopass</span> предписывает создать закрытый ключ без пароля.</p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На основании запроса выпустим сертификат:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> ./easyrsa sign-req client client1</span></p>
<p align="justify" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В данном случае опция <span style=" font-weight:600;">client</span> означает, что сертификат выпускается для клиента.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На запрос-подтверждение выпустить сертификат — вводим <span style=" font-weight:600;">yes</span>:</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> Confirm request details: </span><span style=" font-family:'monospace'; font-weight:600;">yes</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В результате создастся сертификат <span style=" font-weight:600;">client1.ca</span> и закрытый ключ <span style=" font-weight:600;">client1.key</span>.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для удобства переноса пользовательских ключей на клиентский компьютер, скопируйте на сервере эти ключи во временную директорию (<span style=" font-weight:600;">/tmp/keys</span>), выполнив последовательно 3 команды:</p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> mkdir /tmp/keys</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> cp pki/issued/client1.crt pki/private/client1.key pki/dh.pem pki/ca.crt pki/ta.key /tmp/keys</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';"> chmod -R a+r /tmp/keys</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>