<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Очень часто на фрилансе бывает, так что заказчик просит сделать некоторую работу, получив тестовую версию, принимает её и отказывается платить<br />Я на фрилансе достаточно часто делаю скрипты под заказ, администрирование серверов и тд, автоматизация неких процессов на сервер, уловив основную идею написания, как правило, заказчик пропадает, решив что это все так просто и не за что платить.<br />Столкнувшись с понятием Обфуска́ция в С, решил поискать аналогичное решение и для своего любимого Bash.<br /><a name="habracut"></a><br />Разработчик некто <span style=" font-weight:600;">Francisco Javier Rosales García</span><br /><br />Решение называется<span style=" font-weight:600;"> shc </span>— транслятор Bash в C <br /><br />Из опций особо понравилось <br /><span style=" font-family:'monospace';">-e date<br />Expiration date in dd/mm/yyyy format [none]<br />-m message<br />message to display upon expiration [&quot;Please contact<br />your provider&quot;]<br /></span><br /><br />Скачать можно исходники по адресу <a href="http://www.datsi.fi.upm.es/~frosal/"><span style=" text-decoration: underline; color:#0000ff;">www.datsi.fi.upm.es/~frosal</span></a><br /><br />Пример работы:<br /><br />1) Создадим простейший Bash скрипт test.sh<br /><br /></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">#!/bin/bash</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">echo &quot;Hello WORD&quot; #вывод приветствия</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">a=$1 #Первая введенная переменная</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">echo $a #Вывод содержимого переменной</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace';"><br /></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />Проверяем <br /></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">sh test.sh  test</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">Hello WORD</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">test</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />2) Запустим shc и выполним преобразование <br /></p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">[user@server shc-3.8.7]$ ./shc -v -r -T -f test.sh</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /><br />3) На выходе получаем <br /><span style=" font-family:'monospace';">shc shll=bash<br />shc [-i]=-c<br />shc [-x]=exec '%s' &quot;$@&quot;<br />shc [-l]=<br />shc opts=<br />shc: cc test.sh.x.c -o test.sh.x<br />shc: strip test.sh.x<br />shc: chmod go-r test.sh.x</span><br /><br />4) Проверка <br />./test.sh.x test<br />Hello WORD<br />test<br /><br />Теперь по порядку <br /><br />Создается файл test.sh.x.c — практически нечитаемое содержимое Сишного кода, его в любой момент можно скомпилить вручную используя cc компилятор.<br /><br />Второй файл test.sh.x — уже бинарный, выполняется на любом практически Линуксе, проверил на 5ти (Gentoo, RHEL, Debian, ALT, OpenSuSE)<br /><br />О производительности говорить не приходится, так как это неактуально, скрипты пишутся для других задач.</p></body></html>