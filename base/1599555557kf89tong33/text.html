<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">	Вы можете создать файл systemd.link, например <span style=" font-family:'monospace';">/etc/systemd/network/25-eth0.link</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Универсальный файл для Raspbery Pi 3B (возможно, при других версиях он будет таким же или похожим), он может быть следующим: </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">[Match]</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">Driver=smsc95xx</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">Path=platform-3f980000.usb-usb-0:1.1:1.0</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">#MACAddress=b8:27:eb:??:??:??</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace';"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">[Link]</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">Description=Raspberry Pi embedded SMSC9512/9514 Fast Ethernet Adapter</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">Name=eth0</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы проверить параметры драйвера и пути для определенного устройства (здесь здесь), вы можете использовать <span style=" font-family:'monospace';">udevadm info -q all /sys/class/net/eth0</span> (добавить <span style=" font-family:'monospace';">-a</span>, чтобы увидеть всех предков). </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вместо <span style=" font-family:'monospace';">Driver</span> и <span style=" font-family:'monospace';">Path</span> директивы, вы можете использовать значение <span style=" font-family:'monospace';">MACAddress</span>, но оно будет уникальным для всех устройств. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для других устройств (например, wlan0) вы можете создать аналогичный файл <span style=" font-family:'monospace';">.link</span>. У беспроводных устройств обычно есть <span style=" font-family:'monospace';">Type=wlan</span> (udev <span style=" font-family:'monospace';">DEVTYPE</span> вход): </p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">[Match]</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">Type=wlan</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">Driver=brcmfmac</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">Path=platform-3f300000.mmc</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">#MACAddress=b8:27:eb:??:??:??</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace';"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">[Link]</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">Description=Raspberry Pi embedded Wireless Adapter</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace';">Name=wlan0</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> </pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для получения дополнительной информации см. <span style=" font-family:'monospace';">man systemd.link</span>. </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">ответил <a href="https://raspberrypi.stackexchange.com/users/69634/mikhail-vagin"><span style=" text-decoration: underline; color:#0000ff;">Mikhail Vagin</span></a> 24 сентября 2017, 19:48:29 </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1 </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Похоже, что следующая версия Raspbian /Debian может перейти на <a href="https://www.freedesktop.org/wiki/Software/systemd/PredictableNetworkInterfaceNames/"><span style=" text-decoration: underline; color:#0000ff;">&quot;предсказуемую сеть имена интерфейсов &quot;</span></a> - что вызовет много людей для цикла, но должно предотвратить такие проблемы. Может быть. Во всяком случае, как уже упоминалось, традиционно 'udev отправил поддержку для назначения постоянных имен ethX определенным интерфейсам на основе их MAC-адресов , которые, по вашему мнению, будут согласованы на Pi (OEM-префикс всегда так же, как я заметил), за исключением, очевидно, что есть какой-то сбой здесь, возможно, с учетом рассматриваемого слота, как уже занятого. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Похоже, что это в настоящее время получается через скрипт, <span style=" font-family:'monospace';">/lib/udev/write_net_rules</span>. Хотя есть, вероятно, лучший способ (вы могли бы изучить это самостоятельно), хакерским решением было бы просто отключить правило, которое вызывает это; это находится в <span style=" font-family:'monospace';">/lib/udev/rules.d/75-persistent-net-generator.rules</span>. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Я заметил, что есть <span style=" font-family:'monospace';">/lib/udev/rules.d/75-persistent-net-generator.rules.distrib</span>; Я считаю, добавив, что суффикс отключает это, возможно, это то, что сделал Raspbian. Единственное различие заключается в удалении исключения <span style=" font-family:'monospace';">eth*</span>, <span style=" font-family:'monospace';">wlan*</span> и некоторые другие вещи (рисунок). Возможно, вы захотите проверить, находятся ли эти файлы на самом деле. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Что касается хакерского решения, просто переместите оба файла или добавьте суффикс, например <span style=" font-family:'monospace';">.disabled</span>. Это может быть связано с заменой системных обновлений, поэтому «лучшее решение» должно было бы написать ваше собственное правило, чтобы переопределить это и поместить его в <span style=" font-family:'monospace';">/etc/udev/rules.d</span> - но я не знаю, как это должно произойти в этом случае. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Я не могу обещать, что хакерское решение не вызовет вас в какой-то форме печали, но его легко отменить (если вы не удаляете эти файлы) и возможно не будет, поскольку все это не имеет значения на Pi, где, вероятно, есть только пара интерфейсов, и они могут также сохранить имя, которое дает ядро. </p></body></html>