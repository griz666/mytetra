<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="post-1557"></a><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Н</span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">астройка OpenVPN сервера и клиента на Mikrotik</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Бывают случаи, когда необходимо настроить удалённый доступ на mikrotik или даже на несколько.<br />Особенно это актуально, если вы обслуживаете несколько объектов и нет возможности физически постоянно присутствовать возле оборудования.<br />В этом статье мы разберём, как настроить OpenVPN сервер на mikrotik, а также клиенты на mikrotik и компьютере под управлением Windows.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Для работы нам понадобится Белый IP адрес (он и будет адресом сервера в наших настройках) для доступа к серверу из интернета и сертификаты безопасности.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Краткий план данной статьи:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://wifisystem.ru/docs/mikrotik/openvpn-server-mikrotik/#vpnkey"><span style=" text-decoration: underline; color:#0000ff;">Создание сертификатов и ключей OpenVPN</span></a></li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://wifisystem.ru/docs/mikrotik/openvpn-server-mikrotik/#vpnserver"><span style=" text-decoration: underline; color:#0000ff;">Создание сервера OpenVPN на Mikrotik</span></a></li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://wifisystem.ru/docs/mikrotik/openvpn-server-mikrotik/#vpnclientpc"><span style=" text-decoration: underline; color:#0000ff;">Создание клиента OpenVPN на ПК</span></a></li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://wifisystem.ru/docs/mikrotik/openvpn-server-mikrotik/#vpnclientmikrotik"><span style=" text-decoration: underline; color:#0000ff;">Создание клиента OpenVPN на Mikrotik</span></a></li></ul>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="vpnkey"></a><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">С</span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">оздание сертификатов и ключей OpenVPN</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">1)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Скачаем программу </span><a href="https://openvpn.net/index.php/open-source/downloads.html"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">OpenVPN</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> с официального сайта.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412g5abeezwbd.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">2)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Устанавливаем, выбрав все галочки.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">EasyRSA Certificate Management Scripts нам обязательно понадобится для генерации ключей и сертификатов.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image155207741210r9k24uv3.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">3)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Указываем путь. В дальнейшем он нам понадобится. В нашем случае используем стандартный </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">C:\Program Files\OpenVPN</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">4)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> После установки заходим в </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">C:\Program files\OpenVPN\easy-rsa</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Открываем </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vars.bat</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> (если его нет, то </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vars.bat.sample</span><span style=" font-family:'Sans Serif'; font-size:9pt;">) блокнотом или NotePad++ и редактируем его.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">set KEY_COUNTRY=RU</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">set KEY_PROVINCE=MoscowRegion</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">set KEY_CITY=MOSCOW</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">set KEY_ORG=OpenVPN</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">set KEY_EMAIL=mail@mail.com</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">set KEY_CN=server</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">set KEY_NAME=server</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">set KEY_OU=OU</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">set PKCS11_MODULE_PATH=changeme</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">set PKCS11_PIN=1234</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">В строках  </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">set KEY_CN</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> и </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">set KEY_NAME</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> указываем </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">server</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Последние 2 строки — параметры по умолчанию. Остальное можете редактировать под себя.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Сохраняем файл как </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vars.bat</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> на рабочий стол, а затем копируем в папку </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">C:\Program files\OpenVPN\easy-rsa</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Чаще всего сохранить напрямую в исходную папку не получится — не хватает прав.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">5)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Отредактируем файл </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">openssl-1.0.0.cnf</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Так же открываем с помощью блокнота или notepad++</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Нас интересует строка:<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">default_days = 3650 # how long to certify for</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Она отвечает за время жизни сертификата. Если значение отличается — то указываем 3650 (10 лет).<br />Сохраняем.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">6)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Запускаем командную строку от имени администратора:<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Пуск — Все программы — Стандартные </span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Правой кнопкой мыши на «Командная строка» и в меню — Запустить от имени администратора.<br />Командную строку не закрываем до конца процесса генерации сертификатов.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412ll563ryjpa.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">7)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Поочередно выполняем следующие три команды:<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">cd C:\Program files\OpenVPN\easy-rsa </span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vars</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">clean-all</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">В итоге мы должны увидеть сообщение «</span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Скопировано файлов: 1</span><span style=" font-family:'Sans Serif'; font-size:9pt;">» дважды.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412u6fkx9zc6q.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">В папке</span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;"> C:\Program files\OpenVPN\easy-rsa</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> появится папка </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">keys</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> с двумя файлами </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">index.txt</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> и </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">serial.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412q7qhwq0gkb.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">8)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Генерируем ключ Диффи Хельмана — команда </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">build-dh</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Генерация займёт некоторое время. Дождитесь окончания.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">9)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Генерируем ключ центра сертификации (CA) — </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">build-ca.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Нажимаем Enter, пока не закончатся вопросы.<br />Вы увидите в командной строке путь </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">C:\Program files\OpenVPN\easy-rsa</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412k6wpcfwryl.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Нет смысла менять заданные значения. Вы ранее прописали эти параметры в файле </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vars.bat</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">10)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Генерируем сертификат сервера — команда </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">build-key-server server</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Нажимаем </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Enter</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> (оставляем параметры по умолчанию, прописанные в </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">vars.bat</span><span style=" font-family:'Sans Serif'; font-size:9pt;">), пока не дойдём до вопросов.<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Sign the certificate?</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> (Создание сертификата на 3650 дней)<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">1 out of 1 certificate requests certified, commit?</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> (Запись сертификата в базу)<br />На вопросы отвечаем нажатием </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Y</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412197gtl5sxb.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">11)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Генерируем сертификат клиента </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">build-key client</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Нажимаем </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Enter</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> (оставляем параметры по умолчанию, прописанные в</span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;"> vars.bat</span><span style=" font-family:'Sans Serif'; font-size:9pt;">), пока не дойдём до вопросов </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Common Name</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> и </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Name</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.<br />На эти вопросы отвечаем </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">client</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> — это название создаваемого сертификата.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">На вопросы </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Sign the certificate?</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> и </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">1 out of 1 certificate requests certified, commit?</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> отвечаем нажатием </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Y</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">12)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Генерация сертификатов окончена.<br />В папке </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">C:\Program files\OpenVPN\easy-rsa\keys</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> можно увидеть следующие файлы:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412inyolue1bz.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Сертификаты для сервера и клиентов готовы.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="vpnserver"></a><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Н</span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">астройка OpenVPN сервера на Mikrotik</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Подключимся к </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Mikrotik</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> с помощью программы </span><a href="http://download2.mikrotik.com/routeros/winbox/3.11/winbox.exe"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Winbox</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;">.<br />Загрузим 3 файла: </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ca.crt, server.crt, server.key</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Для этого в меню нажмём </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Files</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> и перетащим их из папки </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">C:\Program files\OpenVPN\easy-rsa\keys</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412sbl50dkc4j.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">13)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Далее необходимо их импортировать.<br />Откроем </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">System – Certificates — Import</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> и поочерёдно выберем сертификаты в этом порядке:<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ca.crt</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">server.crt</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">server.key</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412d58111m7aj.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">После импорта появятся две записи:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412y8nxx87rpy.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">14)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Создадим пул адресов для </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">VPN</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> клиентов:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">IP — Pool — add (+)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Введём название </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">openvpn-pool</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Диапазон </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">172.30.0.2-172.30.0.253</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15520774126h9rm95n1p.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">15)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Создадим </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">PPP</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> профиль.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">PPP — Profiles — add (+)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Введём название </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">openvpn</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Локальный адрес </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">172.30.0.1</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Созданный Пул </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">openvpn-pool</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Остальные настройки оставляем по умолчанию.<br />Нажимаем </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ОК.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412mfvugcb2zl.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">16)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Создадим непосредственно сам </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">OpenVPN</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> сервер<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">PPP — Interface — OVPN Server</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Включаем </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Enable</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Указываем порт </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">1194</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Выбираем наш профиль </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">openvpn</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Поставим галочку </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Require Client Certificate</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Выберем наш сертификат </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">server.crt</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15520774121yaovnc2e1.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">17)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Создадим пользователя для подключения.<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">PPP — Secrets — add (+)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Введём имя пользователя и пароль </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ovpn_user1</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Выбираем Сервис </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ovpn</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> и профиль </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">openvpn</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412hlzqs1gdoh.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Создадим 2 пользователя:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ovpn_user1 </span><span style=" font-family:'Sans Serif'; font-size:9pt;">для клиента на компьютере</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ovpn_mikrotik1 </span><span style=" font-family:'Sans Serif'; font-size:9pt;">для клиента на Mikrotik</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Рекомендуется для каждого VPN клиента создавать отдельное уникальное имя пользователя.<br />В дальнейшем это упростит работу и позволит отслеживать всех подключенных VPN клиентов.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">18)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Настроим фаервол<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">IP — Firewall — add(+)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Во вкладке </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">General</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> указываем:<br />Chain — </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">input</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Protocol — </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">tcp</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Порт </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">1194</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Интерфейс — </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ether1</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> (Если интернет идёт через него)<br />Вкладка </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Action</span><span style=" font-family:'Sans Serif'; font-size:9pt;">:<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Action — accept</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Затем </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ОК</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15520774123qcek8qwq6.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Сервер настроен, теперь приступим к настройке VPN клиентов.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="vpnclientpc"></a><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Н</span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">астройка VPN клиента на компьютере под управлением Windows</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">19)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Копируем в папку </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">C:\Program files\OpenVPN\config\</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">из </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">C:\Program files\OpenVPN\easy-rsa\keys</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> следующие файлы<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ca.crt, client.crt, client.key.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">из </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">C:\Program files\OpenVPN\simple-config\</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">client.ovpn</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Создадим текстовый файл </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">pass</span><span style=" font-family:'Sans Serif'; font-size:9pt;">, где укажем логин и пароль от созданного VPN клиента на сервере.<br />В нашем случае это </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ovpn_user1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412xs47gfutxp.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">20)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Откроем файл </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">client.ovpn</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> с помощью блокнота или notepad++<br />Изменяем следующие строки:<br />#Протокол<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">proto tcp</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />#Адрес и порт сервера<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">remote ваш.ip.адрес.сервера 1194</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">#Проверяем правильность названия ключей<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ca ca.crt</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">cert client.crt</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">key client.key</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">И в самом конце добавим строчку<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">auth-user-pass «C:\\Program files\\OpenVPN\\config\\pass.txt»</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />В итоге у нас получатся следующие настройки в этом файле:<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">client</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">dev tun</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">proto tcp</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">remote адрес_сервера 1194</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">resolv-retry infinite</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">nobind</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">persist-key</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">persist-tun</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ca ca.crt</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">cert user.crt</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">key user.key</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">remote-cert-tls server</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">cipher AES-128-CBC</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">verb 3</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">auth-user-pass «c:\\Program Files\\OpenVPN\\config\\pass.txt»</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Остальные настройки закоментированы решеткой «#» или точкой с запятой «;»</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">21)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Сохраняем файл. Если сохранить в папку не получается — сохраняем на рабочий стол, а затем копируем с заменой.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Запускаем OpenVPN и подключаемся.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412aeap5ir1wv.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">После подключения можем увидеть, что нам назначен IP из диапазона, который ранее указали на сервере.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412yf2b9mjfya.png" /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="vpnclientmikrotik"></a><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Н</span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">астройка VPN клиента на Mikrotik</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Имея настроенный </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">OpenVPN</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> сервер, можно настроить доступ на </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Mikrotik</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> даже там, где нет белого IP адреса.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">22)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Подключимся к </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Mikrotik</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> с помощью программы </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Winbox</span><span style=" font-family:'Sans Serif'; font-size:9pt;">.<br />Загрузим 2 файла:  </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">client.crt, client.key</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Для этого в меню нажмём </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Files</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> и перетащим их из папки </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">C:\Program files\OpenVPN\easy-rsa\keys</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412lcipzy4ar2.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">23)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Далее необходимо их импортировать.<br />Откроем </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">System – Certificates — Import</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> и поочерёдно выберем сертификаты в этом порядке:<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">client.crt</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">client.key</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412zigp717eij.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">24)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Настроим параметры сервера:<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">PPP — add(+) — OVPN client</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412ahec8ne73t.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Во вкладке </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">General</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> указываем имя<br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Name — openVPN1</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> (любое, на ваше усмотрение)<br />Вкладка </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Dial Out:</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Connect To — Адрес сервера(Внешний IP адрес главного hjenthf Mikrotik)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Port 1194</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Указываем пользователя и пароль, который мы создали на VPN сервере<br />В нашем случае это пользователь </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ovpn_mikrotik1</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Сертификат </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Client.crt</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Нажимаем </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">ОК</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412xo5fekeyul.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">25)</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> В терминале набираем </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">/interface ovpn-client monitor openVPN1</span><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Должно появиться сообщение со статусом </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">connected</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412gt3dire65d.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Теперь к этому mikrotik можно подключиться через VPN по адресу, который он получил от VPN сервера</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15520774125vukn2729a.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"><br />Посмотреть адрес можно:<br />В Mikrotik-клиенте в </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">IP-Adresses</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> строка с нашим интерфейсом </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">openVPN1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://wifisystem.ru/wp-content/uploads/openvpnserver27-1.png"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;"><br /></span></a><img src="image1552077412b7fw29gg7b.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">В Mikrotik-сервере </span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">PPP-Active Connections </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1552077412iokl13cvpy.png" /><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p></body></html>