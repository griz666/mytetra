<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">MikroTik. Скрипт контроля мобильного Интернет’а</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"> Автор: Андрей Торженов </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://2keep.net/mikrotik-mobile-internet-check/#comments"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">19 комментариев</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Скрипт контроля работы мобильного Интернет’а (3G/4G) на MikroTik (обновлённая версия </span><a href="https://2keep.net/3g-internet-connection-test-on-mikrotik/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">моего старого скрипта</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;">). Если Интернет недоступен то перезагружается модем и отправляется отчёт на email.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans Serif'; font-size:9pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Обновление от 24/09/2018, Версия 1.1.1:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Увеличен таймер ожидания загрузки модема после процедуры USB Power Reset (с 30 сек до 50) для последующего тестирования доступности Интернет’а. Некоторые модемы с прошивкой HiLink загружаются дольше чем 30 сек (Обсуждение этой проблемы:<a href="https://2keep.net/mikrotik-mobile-internet-check/#comment-466"><span style=" text-decoration: underline; color:#0000ff;"> https://2keep.net/mikrotik-mobile-internet-check/#comment-466</span></a>).</li></ul>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans Serif'; font-size:9pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1550428886naps0jm5it.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="stb-box-1124"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">С</span><span style=" font-family:'Sans Serif'; font-size:9pt;">крипт рассчитан на работу как с модемом со Stick прошивкой (PPP со</span><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Обновление от 17/02/2018, Версия 1.1.0:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Добавлена поддержка модемов с HiLink прошивкой (подробнее читайте в комментариях в скрипте).</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Добавлена проверка правильности указания интерфейса ‘ifName’ и типа модема ‘modemType’.</li></ul>
<hr />
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15504288892jse5f5anm.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="stb-box-1124"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">С</span><span style=" font-family:'Sans Serif'; font-size:9pt;">крипт рассчитан на работу как с модемом со Stick прошивкой (PPP соединением) так и на работу в ограниченном режиме с HiLink модемом. Модем может быть с USB интерфейсом или Mini-PCI. Стандарт мобильной связи модема неважен (2G, 3G или 4G, а в будущем хоть 5G).</span></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Функции скрипта</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Проверяет загрузку процессора в течении указанного времени.</span> Если загрузка 100% — отправляется отчёт на email и перезагружается Mikrotik.</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Проверка наличия WLAN интерфейса.</span> Если интерфейса нет — отправляется отчёт на email и перезагружается Mikrotik (Как-то давно, были у меня проблемы на старом Mikrotik — исчезали Wi-Fi интерфейсы. Помогала только перезагрузка. Проблемы такой давно нет, но данную функцию оставил).</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Проверка наличия маршрута по умолчанию.</span> Если его нет, то перезагружается по питанию USB модем (если функция поддерживается), перезапускается PPP соединение (Stick модем) и отправляется отчёт на email. Бывало у меня, что PPP соединение поднято, но маршрут по умолчанию исчезает. Не знаю, кто был виноват, модем или Mikrotik.</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Проверка наличия трафика на интерфейсе USB модема.</span> Если трафик есть, то дальнейшие проверки PINGами доступности Интернета не проводятся. Это сделано для того, что бы когда канал забивался на 100% (например из-за Torrent) и ICMP пакеты терялись, скрипт не считал, что интернет недоступен и не перезапускал соединение. Иначе он будет перезапускать соединение по кругу, пока на 100% занят канал в Интернет.</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Если трафика на интерфейсе модема нет, то производится тестирование соединения используя ICMP протокол (ping).</span> Если недоступны сразу ДВА хоста, то перезагружается по питанию USB модем (если функция поддерживается), перезапускается PPP соединение (Stick модем) и отправляется отчёт на email. Реализована проверка на ошибки написания адреса хоста или ошибки резлова IP по доменному имени. В моём старом скрипте, такой проверки не было и могла произойти ошибка резолва IP по домену когда недоступен DNS сервер и скрипт останавливал свою работу.</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Отправка отчета на email о состоянии USB модема и сети сотового оператора (для Stick модема).</span> В отчёт входит: <span style=" font-style:italic;">средний</span> уровень сигнала мобильной сети (RSSI измеряется в течении 10 секунд и вычисляется среднее значение), название оператора, технология подключения к сети, модель модема, LAC, CID и др. Также на email отправляется прикрепленный файл с лог файлом Mikrotik.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15504288892jse5f5anm.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="stb-box-3372"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">Д</span><span style=" font-family:'Sans Serif'; font-size:9pt;">анный скрипт, это обновлённая версия </span><a href="https://2keep.net/3g-internet-connection-test-on-mikrotik/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">моего скрипта</span></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> для проверки работы мобильного Интернета, написанного в 2014 году. В данной статье я не буду подробно рассказывать как установить скрипт, настроить отправку почты, создать правило в планировщике. Если у вас возникают с этим проблемы, почитайте мою предыдущую статью на эту тему, там всё разжёвано:  </span><a href="https://2keep.net/3g-internet-connection-test-on-mikrotik/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Скрипт контроля качества 3G Интернет’а на MikroTik</span></a></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">В сущности, это не один, а два скрипта:</span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">healthCheck</span> — скрипт проверки работы мобильного Интернета. Данный скрипт, с помощью планировщика запускается каждые 5 минут и выполняет тестирование мобильного Интернета.</li>
<li style=" font-family:'Sans Serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">modemStatus</span> — скрипт вызывается из скрипта «healthCheck» и выполняет опрос модема со Stick прошивкой, получая с него следующие данные: состояние модем, технология подключения к сети (3G, 4G), оператор, средний уровень сигнала RSSI и др. Для модема типа HiLink данный скрипт не нужен, т.к. с HiLink модема невозможно получить информацию.</li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Если используется модем со Stick прошивкой, то в MikroTik необходимо установить два скрипта.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">В комментариях в скриптах, я постарался по максимуму описать алгоритм их работы. В случае необходимости, это вам поможет подправить скрипты под свои задачи.</span></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Скрипт healthCheck</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">С помощью планировщика скрипт «healthCheck» запускается каждые 5 минут и выполняет тестирование Интернета.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1550428889e5zbgj6fik.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="stb-box-1635"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">О</span><span style=" font-family:'Sans Serif'; font-size:9pt;">братите внимание на параметр «usbReset». Включайте его только если ваш Mikrotik поддерживает функцию USB Power Reset (читайте комментарии в скрипте). </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><a name="crayon-5c68fcaad4082163157724"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">h</span><span style=" font-family:'Sans Serif'; font-size:9pt;">ealthCheck </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans Serif'; font-size:9pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">7</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">10</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">11</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">12</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">13</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">14</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">15</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">16</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">17</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">18</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">19</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">20</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">21</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">22</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">23</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">24</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">25</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">26</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">27</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">28</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">29</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">30</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">31</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">32</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">33</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">34</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">35</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">36</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">37</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">38</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">39</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">40</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">41</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">42</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">43</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">44</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">45</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">46</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">47</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">48</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">49</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">50</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">51</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">52</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">53</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">54</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">55</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">56</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">57</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">58</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">59</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">60</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">61</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">62</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">63</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">64</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">65</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">66</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">67</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">68</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">69</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">70</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">71</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">72</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">73</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">74</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">75</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">76</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">77</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">78</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">79</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">80</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">81</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">82</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">83</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">84</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">85</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">86</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">87</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">88</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">89</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">90</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">91</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">92</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">93</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">94</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">95</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">96</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">97</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">98</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">99</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">101</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">102</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">103</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">104</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">105</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">106</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">107</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">108</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">109</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">110</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">111</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">112</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">113</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">114</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">115</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">116</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">117</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">118</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">119</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">120</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">121</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">122</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">123</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">124</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">125</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">126</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">127</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">128</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">129</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">130</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">131</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">132</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">133</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">134</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">135</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">136</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">137</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">138</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">139</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">140</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">141</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">142</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">143</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">144</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">145</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">146</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">147</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">148</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">149</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">150</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">151</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">152</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">153</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">154</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">155</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">156</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">157</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">158</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">159</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">160</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">161</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">162</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">163</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">164</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">165</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">166</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">167</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">168</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">169</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">170</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">171</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">172</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">173</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">174</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">175</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">176</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">177</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">178</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">179</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">180</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">181</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">182</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">183</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">184</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">185</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">186</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">187</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">188</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">189</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">190</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">191</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">192</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">193</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">194</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">195</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">196</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">197</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">198</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">199</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">200</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">201</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">202</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">203</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">204</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">205</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">206</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">207</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">208</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">209</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">210</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">211</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">212</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">213</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">214</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">215</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">216</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">217</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">218</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">219</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">220</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">221</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">222</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">223</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">224 </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><a name="crayon-5c68fcaad4082163157724-1"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-2"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Version 1.1.1 (24/09/2018)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-3"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Увеличен таймер ожидания загрузки модема после процедуры USB Power Reset (с 30 сек до 50)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-4"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> для последующего тестирования доступности Интернет'а.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-5"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Некоторые модемы с прошивкой HiLink загружаются дольше чем 30 сек.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-6"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Обсуждение этой проблемы: https://2keep.net/mikrotik-mobile-internet-check/#comment-466).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-7"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-8"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Version 1.1.0 (17/02/2018)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-9"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> + Добавлена поддержка модемов с HiLink прошивкой (ограниченная функциональность скрипта).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-10"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;">   В случае если не работает Интернет, то скрипт перезагружает по питанию модем.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-11"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;">   MikoTik должен поддерживать функцию &quot;USB Power Reset&quot; (https://wiki.mikrotik.com/wiki/Manual:USB_Features).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-12"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;">   Значение параметра 'usbReset' игнорируется, если тип модем 'hilink', подразумевается что 'usbReset' всегда 'Yes'.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-13"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;">   С HiLink модема невозможно получить информацию о работе модема и мобильной сети,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-14"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;">   поэтому скрипт &quot;modemStatus&quot; не нужен.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-15"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> + Добавлена проверка правильности указания интерфейса 'ifName' и типа модема 'modemType'.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-16"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-17"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;">#########################</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-18"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;">## НАЧАЛО - Настройки ###</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-19"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-20"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Тип прошивки модема. Возможные варианты: stick, hilink</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-21"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local modemType &quot;stick&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-22"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-23"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Имя интерфейса модема</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-24"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">global ifName &quot;ppp-out1&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-25"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-26"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> email на которые отправлять отчёты</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-27"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local mailAddrTo &quot;user@domain.ru&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-28"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-29"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> В течении какого времени (сек) анализируем загрузку CPU</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-30"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local cpuLoadSec 5;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-31"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-32"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Количество посылаемый icmp пакетов</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-33"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local cntPing 10;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-34"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-35"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Ожидаемое количество вернувшихся пакетов</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-36"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> В вашем случае, ожидается, что 10 пакетов отправлено и хотя бы 1 должен вернуться</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-37"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local cntPingOk 1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-38"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-39"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Первый тестируемый адрес в Интернете</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-40"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local hostPing1 &quot;ya.ru&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-41"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-42"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Второй тестируемый адрес в Интернете</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-43"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local hostPing2 &quot;8.8.8.8&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-44"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-45"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Отключать питание на USB для перезагрузки модема? (yes/no)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-46"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Параметра 'usbReset' игнорируется, если тип модем 'hilink', подразумевается что 'usbReset' всегда 'Yes'.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-47"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Внимание! Если включить данную опцию, но ваш Mikrotik не поддерживает её, </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-48"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> то выполнение скрипта прервётся и работать скрипт не будет!</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-49"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Список MikroTik поддерживающих USB Power Reset: https://wiki.mikrotik.com/wiki/Manual:USB_Features</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-50"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Если вы не найдете свой MikroTik в списке, то вы можете выполнить в консоли команду: /system routerboard usb power-reset</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-51"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> если появится ошибка - &quot;ERROR: USB power reset not implemented on this hardware&quot;, значит поддержки нет.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-52"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local usbReset &quot;no&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-53"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-54"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;">## КОНЕЦ - Настройки ###</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-55"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;">########################</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-56"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-57"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local inetStatus;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-58"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local inetFailedReason;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-59"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local modemTypeFound &quot;0&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-60"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-61"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Проверяем наличие интерфейса 'ifName' и правильности указания типа прошивки модема 'modemType'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-62"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-63"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">if ($modemType = &quot;hilink&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-64"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :set modemTypeFound &quot;1&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-65"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :if ([/interface lte find name=$ifName] = &quot;&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-66"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log warning &quot;Interface '$ifName' for '$modemType' modem not found!&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-67"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log warning &quot;Check parameter - ifName&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-68"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log warning &quot;Script is stopped!&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-69"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :error &quot;Script is stopped! For more information, see log...&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-70"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-71"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">}</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> else={ if ($modemTypeFound != &quot;1&quot;) do={ :set modemTypeFound &quot;0&quot;; } }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-72"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-73"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">if ($modemType = &quot;stick&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-74"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :set modemTypeFound &quot;1&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-75"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :if ([/interface ppp-client find name=$ifName] = &quot;&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-76"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log warning &quot;Interface '$ifName' for '$modemType' modem not found!&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-77"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log warning &quot;Check parameter - ifName&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-78"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log warning &quot;Script is stopped!&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-79"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :error &quot;Script is stopped! For more information, see log...&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-80"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-81"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">}</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> else={ if ($modemTypeFound != &quot;1&quot;) do={ :set modemTypeFound &quot;0&quot;; } }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-82"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-83"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">if ($modemTypeFound = &quot;0&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-84"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :log warning &quot;$modemType - incorrect type of modem!&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-85"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :log warning &quot;Check parameter - modemType&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-86"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :log warning &quot;Script is stopped!&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-87"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :error &quot;Script is stopped! For more information, see log...&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-88"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-89"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-90"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> проверяем наличие интерфейсов с именем начинающимся на wlan</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-91"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-92"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">if ([/interface find name~&quot;wlan&quot;] = &quot;&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-93"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   /tool e-mail send to=$mailAddrTo body=&quot;Wi-Fi interface not found. Mikrotik rebooted!&quot; subject=&quot;$[/system identity get name]. Wi-Fi interface not found. $[/system clock get time] $[/system clock get date]&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-94"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :delay 20;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-95"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   /system reboot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-96"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-97"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-98"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">delay 1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-99"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-100"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Проверяем загрузку CPU</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-101"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-102"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local cpu100 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-103"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">f</span><span style=" font-family:'Sans Serif'; font-size:9pt;">or x1 from=1 to=$cpuLoadSec do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-104"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :if ([/system resource get cpu-load] = &quot;100&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-105"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :set cpu100 ($cpu100+1);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-106"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-107"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">  :delay 1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-108"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-109"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">if ($cpu100 = $cpuLoadSec) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-110"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   /tool e-mail send to=$mailAddrTo body=&quot;Within $cpuLoadSec seconds, CPU load on Mikrotik: 100%. Mikrotik rebooted!&quot; subject=&quot;$[/system identity get name]. CPU load on Mikrotik: 100%. $[/system clock get time] $[/system clock get date]&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-111"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :delay 20;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-112"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   /system reboot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-113"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-114"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-115"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Проверка наличие Интернета</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-116"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-117"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Проверяем, есть ли маршрут по умолчанию</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-118"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">i</span><span style=" font-family:'Sans Serif'; font-size:9pt;">f ([/ip route find where dst-address=0.0.0.0/0] != &quot;&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-119"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-120"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   # Если маршрут есть, то в течении 5 секунд следим за ИСХОДЯЩИМ и ВХОДЯЩИМ трафиком на сетевом интерфейсе</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-121"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :local wanTrafTx 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-122"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :local wanTrafTxRes 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-123"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :local wanTrafRx 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-124"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :local wanTrafRxRes 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-125"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   for x from=1 to=5 do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-126"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       /interface monitor-traffic [/interface find name=$ifName] once do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-127"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :set wanTrafTx (tx-bits-per-second / 1024);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-128"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-129"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       /interface monitor-traffic [/interface find name=$ifName] once do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-130"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :set wanTrafRx (rx-bits-per-second / 1024);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-131"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-132"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       if ($wanTrafTx &gt; $wanTrafTxRes) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-133"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :set wanTrafTxRes $wanTrafTx;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-134"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-135"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       if ($wanTrafRx &gt; $wanTrafRxRes) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-136"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :set wanTrafRxRes $wanTrafRx;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-137"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-138"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :delay 1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-139"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-140"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-141"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   # Если трафик на интерфейсе меньше 100 кбит/с запускаем проверку PINGами</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-142"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   if ($wanTrafTxRes &lt; 100 and $wanTrafRxRes &lt; 30) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-143"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       # Производим тестирование доступности хостов (с проверкой на ошибки) и результаты помещаем в переменные</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-144"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :local cntRes1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-145"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :local errorMsgHost1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-146"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :do {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-147"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :set cntRes1 [/ping count=$cntPing $hostPing1];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-148"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       } on-error={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-149"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :set cntRes1 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-150"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :set errorMsgHost1 &quot;Error ping host1: $hostPing1, maybe DNS resolve error!&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-151"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :log warning $errorMsgHost1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-152"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-153"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :local cntRes2;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-154"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :local errorMsgHost2;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-155"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :do {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-156"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :set cntRes2 [/ping count=$cntPing $hostPing2];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-157"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       } on-error={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-158"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :set cntRes2 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-159"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :set errorMsgHost2 &quot;Error ping host2: $hostPing2, maybe DNS resolve error!&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-160"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :log warning $errorMsgHost2;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-161"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-162"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       # Если из 10ти посланных пакетов вернулось меньше указанного в переменной $cntPingOk, то делаем запись в лог файл,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-163"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       # присваиваем переменной inetStatus признак наличия проблем с Интернетом (failed) и далее перезапускам соединение</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-164"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       if ($cntRes1 &lt; $cntPingOk and $cntRes2 &lt; $cntPingOk) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-165"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :set inetStatus &quot;failed&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-166"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :set inetFailedReason (&quot;\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-167"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">               Internet connection failure!\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-168"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">               \n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-169"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">               Host1 - $hostPing1 lost &quot;.[:tonum $cntPing] - [:tonum $cntRes1].&quot; packets of $cntPing ($errorMsgHost1)\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-170"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">               Host2 - $hostPing2 lost &quot;.[:tonum $cntPing] - [:tonum $cntRes2].&quot; packets of $cntPing ($errorMsgHost2)\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-171"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">               \n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-172"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">               WAN speed RX: $wanTrafRxRes kbit/s \n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-173"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">               WAN speed TX: $wanTrafTxRes kbit/s \n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-174"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           &quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-175"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :log warning $inetFailedReason;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-176"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-177"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-178"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">}</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> else={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-179"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   # Если маршрута по умолчанию нет, то делаем запись в лог файл,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-180"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   # присваиваем переменной inetStatus признак наличия проблем с Интернетом (failed) и далее перезапускам соединение </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-181"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :set inetStatus &quot;failed&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-182"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :set inetFailedReason &quot;Internet connection failure!\nNo default gateway!\n&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-183"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">log warning $inetFailedReason;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-184"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-185"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-186"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Если после проверки доступности Интернета есть проблемы, то...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-187"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">i</span><span style=" font-family:'Sans Serif'; font-size:9pt;">f ($inetStatus = &quot;failed&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-188"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :global modemStatus;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-189"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   # Если модем со Stick прошивкой, то перезагружаем PPP интерфейс, </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-190"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   # питание на USB (если включено) и получаем данные с модема и мобильной сети.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-191"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   if ($modemType = &quot;stick&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-192"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       /interface ppp-client disable $ifName;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-193"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :delay 1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-194"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-195"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       # Отключаем на 5 секунд питание на USB для перезагрузки модема</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-196"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       if ($usbReset = &quot;yes&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-197"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :log warning &quot;USB Modem power reset!&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-198"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           /system routerboard usb power-reset duration=5;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-199"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           # Ждём 50 сек пока загрузится модем</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-200"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :log warning &quot;Wait 50 sec to modem boot&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-201"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           :delay 50;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-202"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-203"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-204"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       # Запускаем скрипт &quot;modemStatus&quot; и получаем состояние модема и уровня сигнала сети</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-205"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       execute &quot;/system script run modemStatus&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-206"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :delay 15;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-207"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-208"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       /interface ppp-client enable $ifName;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-209"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-210"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   # Если модем с HiLink прошивкой, то только перезагружаем питание на USB</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-211"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   if ($modemType = &quot;hilink&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-212"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :set modemStatus &quot;Modem status: HiLink modem. No additional info!&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-213"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log warning &quot;USB Modem power reset!&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-214"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       /system routerboard usb power-reset duration=5;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-215"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log warning &quot;Wait 30 sec to modem boot&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-216"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :delay 30;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-217"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-218"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :delay 20;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-219"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   # Сохраняем лог в файл</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-220"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   /log print file=log.txt</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-221"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   # Отправляем email с отчётом и логом</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-222"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   /tool e-mail send to=$mailAddrTo file=log.txt body=&quot;$inetFailedReason\n$modemStatus&quot; subject=&quot;$[/system identity get name]. Internet connection failure! $[/system clock get time] $[/system clock get date]&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-223"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4082163157724-224"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p></td></tr></table>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Скрипт modemStatus</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image15504288892jse5f5anm.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="stb-box-3924"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">И</span><span style=" font-family:'Sans Serif'; font-size:9pt;">спользуется только для модемов со Stick прошивкой.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Скрипт «modemStatus» вызывается из скрипта «healthCheck» и выполняет опрос модема для получение информации о его состоянии и параметрах сети сотового оператора. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><a name="crayon-5c68fcaad40c3141697665"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">m</span><span style=" font-family:'Sans Serif'; font-size:9pt;">odemStatus </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans Serif'; font-size:9pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">7</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">10</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">11</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">12</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">13</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">14</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">15</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">16</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">17</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">18</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">19</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">20</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">21</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">22</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">23</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">24</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">25</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">26</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">27</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">28</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">29</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">30</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">31</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">32</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">33</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">34</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">35</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">36</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">37</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">38</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">39</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">40</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">41</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">42</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">43</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">44</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">45</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">46</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">47</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">48</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">49 </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><a name="crayon-5c68fcaad40c3141697665-1"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-2"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">#</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> Version 1.0.1 (29/08/2018)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-3"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-4"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">global modemStatus;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-5"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">global ifName;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-6"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local i 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-7"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local avgRSSI 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-8"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">:</span><span style=" font-family:'Sans Serif'; font-size:9pt;">local i1 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-9"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">/</span><span style=" font-family:'Sans Serif'; font-size:9pt;">interface ppp-client info $ifName do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-10"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :set i ($i + 1);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-11"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   # START - Расчитываем среднее значения RSSI (dBm)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-12"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   # При опросе модема, он не сразу выдаёт необходимые данные, а с задержкой, по этому, </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-13"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   # ждём когда появится значение signal-strengh и начинаем расчёт среднего значения RSSI</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-14"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :if ($&quot;signal-strengh&quot; != &quot;&quot;) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-15"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log info &quot;Current RSSI: $&quot;signal-strengh&quot;&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-16"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :set i1 ($i1 + 1);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-17"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       # signal-strengh выдаётся в виде: &quot;-101 dBm&quot;, для расчёта необходимо получить только число!</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-18"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       # Для этого удаляем знак &quot;-&quot; и &quot; dBm&quot;, что бы получить только число &quot;101&quot;.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-19"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       # Записываем полученное число в переменную avgRSSI</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-20"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :set avgRSSI ($avgRSSI + [:tonum [:pick $&quot;signal-strengh&quot; 1 [:find $&quot;signal-strengh&quot; &quot; dBm&quot;]]]);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-21"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-22"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   :if ($i = 10) do={</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-23"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       # Финальная операция по расчёту среднего значения RSSI</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-24"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :set avgRSSI &quot;-$[($avgRSSI / i1)] dBm&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-25"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       # END - Расчитываем среднее значения RSSI (dBm)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-26"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-27"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       # Формируем значение переменной modemStatus, значение которой отправится на почту как часть отчета</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-28"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :set modemStatus &quot;\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-29"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           Modem Status: $&quot;modem-status&quot;\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-30"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           Pin-status: $&quot;pin-status&quot;\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-31"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           Functionality: $&quot;functionality&quot;\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-32"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           Manufacturer: $&quot;manufacturer&quot;\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-33"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           Model: $&quot;model&quot;\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-34"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           Revision: $&quot;revision&quot;\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-35"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           Serial Number: $&quot;serial-number&quot;\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-36"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           Current Operator: $&quot;current-operator&quot;\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-37"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           IMSI: $&quot;imsi&quot;\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-38"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           Access Technology: $&quot;access-technology&quot;\n\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-39"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">           Average Signal Strength: $avgRSSI\</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-40"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       &quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-41"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-42"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log warning &quot;Start report USB Modem:&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-43"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log warning $modemStatus;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-44"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log warning &quot;End report USB Modem&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-45"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       :log warning &quot;Remove modemStatus script job&quot;; </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-46"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">       /system script job remove [find script=modemStatus ];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-47"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span><span style=" font-family:'Sans Serif'; font-size:9pt;">   }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-48"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40c3141697665-49"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p></td></tr></table>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Вкратце по другим настройкам</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Настройка email </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><a name="crayon-5c68fcaad40fa484158706"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">Н</span><span style=" font-family:'Sans Serif'; font-size:9pt;">астройка почты для Yandex.Mail </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">/tool e-mail set address=smtp.ya.ru from=yourLogin@ya.ru password=yourPass port=465 start-tls=tls-only user=yourLogin@ya.ru </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans Serif'; font-size:9pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">4 </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><a name="crayon-5c68fcaad40fa484158706-1"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40fa484158706-2"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">/</span><span style=" font-family:'Sans Serif'; font-size:9pt;">tool e-mail</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40fa484158706-3"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">s</span><span style=" font-family:'Sans Serif'; font-size:9pt;">et address=smtp.ya.ru from=yourLogin@ya.ru password=yourPass port=465 start-tls=tls-only user=yourLogin@ya.ru</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad40fa484158706-4"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Добавление в планировщик запуск скрипта </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><a name="crayon-5c68fcaad4106507342132"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">Д</span><span style=" font-family:'Sans Serif'; font-size:9pt;">обавление скрипта в планировщик </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">/system scheduler add interval=5m name=healthCheck on-event=&quot;/system script run healthCheck&quot; </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans Serif'; font-size:9pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">4 </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><a name="crayon-5c68fcaad4106507342132-1"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4106507342132-2"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">/</span><span style=" font-family:'Sans Serif'; font-size:9pt;">system scheduler</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4106507342132-3"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">a</span><span style=" font-family:'Sans Serif'; font-size:9pt;">dd interval=5m name=healthCheck on-event=&quot;/system script run healthCheck&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4106507342132-4"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Скрипты «healthCheck» и «modemStatus» добавляйте в MikroTik через WinBox, там проще.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">Если возникнут вопросы по данным процедурам, почитайте мою предыдущую статью на эту тему, там всё разжёвано:  </span><a href="https://2keep.net/3g-internet-connection-test-on-mikrotik/"><span style=" font-family:'Sans Serif'; font-size:9pt; text-decoration: underline; color:#0000ff;">Скрипт контроля качества 3G Интернет’а на MikroTik</span></a></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Примеры отчётов приходящих на email</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Нет маршрута по умолчанию</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">I</span><span style=" font-family:'Sans Serif'; font-size:9pt;">nternet connection failure! No default gateway! Modem Status: ready Pin-status: no password required Functionality: full Manufacturer: huawei Model: E3372 Revision: 21.180.01.00.00 Serial Number: 869907027329719 Current Operator: MTS RUS (cellid: 2b3a6, lac: 12a6 ) IMSI: 250116378414154 Access Technology: 3G Average Signal Strength: -99 dBm </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans Serif'; font-size:9pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">7</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">10</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">11</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">12</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">13</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">14</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">15</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">16 </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><a name="crayon-5c68fcaad4110407213505-1"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-2"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">I</span><span style=" font-family:'Sans Serif'; font-size:9pt;">nternet connection failure!</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-3"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">N</span><span style=" font-family:'Sans Serif'; font-size:9pt;">o default gateway!</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-4"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-5"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">M</span><span style=" font-family:'Sans Serif'; font-size:9pt;">odem Status: ready</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-6"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">P</span><span style=" font-family:'Sans Serif'; font-size:9pt;">in-status: no password required</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-7"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">F</span><span style=" font-family:'Sans Serif'; font-size:9pt;">unctionality: full</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-8"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">M</span><span style=" font-family:'Sans Serif'; font-size:9pt;">anufacturer: huawei</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-9"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">M</span><span style=" font-family:'Sans Serif'; font-size:9pt;">odel: E3372</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-10"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">R</span><span style=" font-family:'Sans Serif'; font-size:9pt;">evision: 21.180.01.00.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-11"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">S</span><span style=" font-family:'Sans Serif'; font-size:9pt;">erial Number: 869907027329719</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-12"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">C</span><span style=" font-family:'Sans Serif'; font-size:9pt;">urrent Operator: MTS RUS (cellid: 2b3a6, lac: 12a6 )</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-13"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">I</span><span style=" font-family:'Sans Serif'; font-size:9pt;">MSI: 250116378414154</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-14"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">A</span><span style=" font-family:'Sans Serif'; font-size:9pt;">ccess Technology: 3G</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-15"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">A</span><span style=" font-family:'Sans Serif'; font-size:9pt;">verage Signal Strength: -99 dBm</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad4110407213505-16"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p></td></tr></table>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt; font-weight:600;">Недоступны хосты</span><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">I</span><span style=" font-family:'Sans Serif'; font-size:9pt;">nternet connection failure! Host1 - ya.rud lost 10 packets of 10 (Error ping host1: ya.rud, maybe DNS resolve error!) Host2 - 8.8.8.7 lost 10 packets of 10 () WAN speed RX: 0 kbit/s WAN speed TX: 0 kbit/s Modem Status: ready Pin-status: no password required Functionality: full Manufacturer: huawei Model: E3372 Revision: 21.180.01.00.00 Serial Number: 869907027329719 Current Operator: MTS RUS (cellid: 2b3a6, lac: 12a6 ) IMSI: 250116378414154 Access Technology: 3G Average Signal Strength: -100 dBm </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans Serif'; font-size:9pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">7</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">10</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">11</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">12</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">13</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">14</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">15</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">16</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">17</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">18</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">19</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">20</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">21 </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><a name="crayon-5c68fcaad411e269001649-1"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-2"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">I</span><span style=" font-family:'Sans Serif'; font-size:9pt;">nternet connection failure!</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-3"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-4"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">H</span><span style=" font-family:'Sans Serif'; font-size:9pt;">ost1 - ya.rud lost 10 packets of 10 (Error ping host1: ya.rud, maybe DNS resolve error!)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-5"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">H</span><span style=" font-family:'Sans Serif'; font-size:9pt;">ost2 - 8.8.8.7 lost 10 packets of 10 ()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-6"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-7"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">W</span><span style=" font-family:'Sans Serif'; font-size:9pt;">AN speed RX: 0 kbit/s</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-8"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">W</span><span style=" font-family:'Sans Serif'; font-size:9pt;">AN speed TX: 0 kbit/s</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-9"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-10"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">M</span><span style=" font-family:'Sans Serif'; font-size:9pt;">odem Status: ready</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-11"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">P</span><span style=" font-family:'Sans Serif'; font-size:9pt;">in-status: no password required</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-12"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">F</span><span style=" font-family:'Sans Serif'; font-size:9pt;">unctionality: full</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-13"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">M</span><span style=" font-family:'Sans Serif'; font-size:9pt;">anufacturer: huawei</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-14"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">M</span><span style=" font-family:'Sans Serif'; font-size:9pt;">odel: E3372</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-15"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">R</span><span style=" font-family:'Sans Serif'; font-size:9pt;">evision: 21.180.01.00.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-16"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">S</span><span style=" font-family:'Sans Serif'; font-size:9pt;">erial Number: 869907027329719</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-17"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">C</span><span style=" font-family:'Sans Serif'; font-size:9pt;">urrent Operator: MTS RUS (cellid: 2b3a6, lac: 12a6 )</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-18"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">I</span><span style=" font-family:'Sans Serif'; font-size:9pt;">MSI: 250116378414154</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-19"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">A</span><span style=" font-family:'Sans Serif'; font-size:9pt;">ccess Technology: 3G</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-20"></a><span style=" font-family:'Sans Serif'; font-size:9pt;">A</span><span style=" font-family:'Sans Serif'; font-size:9pt;">verage Signal Strength: -100 dBm</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-5c68fcaad411e269001649-21"></a><span style=" font-family:'Sans Serif'; font-size:9pt;"> </span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;">единением) так и на работу в ограниченном режиме с HiLink модемом. Модем может быть с USB интерфейсом или Mini-PCI. Стандарт мобильной связи модема неважен (2G, 3G или 4G, а в будущем хоть 5G).</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans Serif'; font-size:9pt;"><br /></p></body></html>